# Портативність модуля ArtisanManager

Цей документ описує, як перенести модуль ArtisanManager на інші Laravel-проєкти.

## Чому модуль легко переноситься

### 1. Мінімальні залежності
- Використовує лише стандартні Laravel компоненти
- Не потребує зовнішніх пакетів
- Працює з Laravel 10+ та PHP 8.1+

### 2. Ізольована структура
Весь код модуля знаходиться в одній директорії:
```
app/Modules/ArtisanManager/
```

### 3. Незалежний від проєкту
- Не залежить від моделей даних проєкту
- Не вимагає міграцій бази даних
- Не використовує специфічні для проєкту сервіси

### 4. Гнучка конфігурація
Всі налаштування винесені в конфігураційний файл:
- Префікс URL
- Middleware для авторизації
- Список активних команд

## Процес перенесення (5 хвилин)

### Крок 1: Копіювання файлів (1 хв)
```bash
# З поточного проєкту
cp -r app/Modules/ArtisanManager /path/to/new/project/app/Modules/

# Або через git
cd /path/to/new/project
git checkout path/to/source/branch -- app/Modules/ArtisanManager
```

### Крок 2: Реєстрація сервіс-провайдера (1 хв)
Додайте в `config/app.php`:
```php
'providers' => ServiceProvider::defaultProviders()->merge([
    // ... інші провайдери
    App\Modules\ArtisanManager\ArtisanManagerServiceProvider::class,
])->toArray(),
```

### Крок 3: Налаштування middleware (2 хв)
Опублікуйте конфігурацію:
```bash
php artisan vendor:publish --tag=artisan-manager-config
```

Відредагуйте `config/artisan-manager.php` відповідно до вашої системи авторизації:
```php
'middleware' => ['web', 'auth'], // або ваш власний middleware
```

### Крок 4: Додати до навігації (1 хв)
Додайте посилання в меню адміністратора:
```blade
<a href="{{ route('artisan.index') }}">Artisan команди</a>
```

### Крок 5: Перевірка (необов'язково)
```bash
# Перевірити, що маршрути зареєстровані
php artisan route:list | grep artisan

# Перевірити конфігурацію
php artisan tinker --execute="echo config('artisan-manager.route_prefix');"
```

## Адаптація під специфічні вимоги

### Зміна URL
```php
// config/artisan-manager.php
'route_prefix' => 'dashboard/commands',
```

### Додавання власного middleware
```php
// config/artisan-manager.php
'middleware' => ['web', 'auth', 'role:admin'],
```

### Вимкнення небажаних команд
```php
// config/artisan-manager.php
'enabled_commands' => [
    'cache_clear',
    'config_clear',
    // інші команди закоментовані або видалені
],
```

### Зміна шаблонів
```bash
php artisan vendor:publish --tag=artisan-manager-views
# Редагувати resources/views/vendor/artisan-manager/index.blade.php
```

## Сумісність з різними версіями Laravel

### Laravel 10+
✅ Повністю сумісний

### Laravel 9
✅ Сумісний (можливо знадобиться мінімальна адаптація синтаксису)

### Laravel 8
⚠️ Потребує адаптації:
- Змінити синтаксис типізації в контролері
- Перевірити доступність Artisan::call()

## Перевірочний список для нового проєкту

- [ ] Скопійовано директорію `app/Modules/ArtisanManager`
- [ ] Зареєстровано `ArtisanManagerServiceProvider` в `config/app.php`
- [ ] Опубліковано конфігурацію (опціонально)
- [ ] Налаштовано middleware відповідно до системи авторизації проєкту
- [ ] Додано посилання в меню адміністратора
- [ ] Перевірено доступ до `/admin/artisan` (або іншого URL)
- [ ] Протестовано виконання команд

## Можливі проблеми та рішення

### Проблема: Middleware 'auth.admin' не існує
**Рішення:** Змініть middleware в конфігурації на існуючий в вашому проєкті

### Проблема: Шаблон не відображається правильно
**Рішення:** Переконайтеся, що у вас є базовий layout `layouts.app` або опублікуйте та змініть шаблон

### Проблема: Команди не виконуються
**Рішення:** Перевірте права доступу веб-сервера та конфігурацію PHP

## Рекомендації для продакшену

1. **Обмежте доступ**: Використовуйте надійний middleware авторизації
2. **Логування**: Додайте логування виконаних команд для аудиту
3. **Обмеження команд**: Вимкніть небезпечні команди в продакшені
4. **Підтвердження**: Залиште підтвердження перед виконанням команд

## Підтримка

Модуль не потребує постійної підтримки, оскільки використовує стабільний Laravel API.

При оновленні Laravel перевірте:
- Чи не змінився Artisan facade API
- Чи працюють всі команди як очікується

## Висновок

Модуль ArtisanManager спроектований для максимальної портативності:
- Мінімум залежностей
- Проста структура
- Гнучка конфігурація
- Стандартний Laravel підхід

Переносити між проєктами так само просто, як копіювати файли та змінити конфігурацію.
