# File Manager Module

–¶–µ–π –º–æ–¥—É–ª—å –Ω–∞–¥–∞—î —Ñ–∞–π–ª–æ–≤–∏–π –º–µ–Ω–µ–¥–∂–µ—Ä –¥–ª—è –ø–µ—Ä–µ–≥–ª—è–¥—É —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ –ø–∞–ø–æ–∫ —ñ —Ñ–∞–π–ª—ñ–≤ –ø—Ä–æ–µ–∫—Ç—É –≤—ñ–¥–Ω–æ—Å–Ω–æ document root. –ú–æ–¥—É–ª—å –ª–µ–≥–∫–æ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—å—Å—è –Ω–∞ —ñ–Ω—à—ñ Laravel –ø—Ä–æ–µ–∫—Ç–∏.

## –û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ

- üìÅ –ü–µ—Ä–µ–≥–ª—è–¥ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ –ø–∞–ø–æ–∫ —Ç–∞ —Ñ–∞–π–ª—ñ–≤
- üìÑ –ü–æ–ø–µ—Ä–µ–¥–Ω—ñ–π –ø–µ—Ä–µ–≥–ª—è–¥ —Ç–µ–∫—Å—Ç–æ–≤–∏—Ö —Ñ–∞–π–ª—ñ–≤
- üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (–∫—ñ–ª—å–∫—ñ—Å—Ç—å –ø–∞–ø–æ–∫, —Ñ–∞–π–ª—ñ–≤, —Ä–æ–∑–º—ñ—Ä)
- üîí –ó–∞—Ö–∏—Å—Ç –≤—ñ–¥ –Ω–µ—Å–∞–Ω–∫—Ü—ñ–æ–Ω–æ–≤–∞–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø—É
- ‚öôÔ∏è –ì–Ω—É—á–∫–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —á–µ—Ä–µ–∑ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é
- üöÄ –õ–µ–≥–∫–µ –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–Ω—è –Ω–∞ —ñ–Ω—à—ñ –ø—Ä–æ–µ–∫—Ç–∏

## –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è

### 1. –ö–æ–ø—ñ—é–≤–∞–Ω–Ω—è –º–æ–¥—É–ª—è

–°–∫–æ–ø—ñ—é–π—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é `app/Modules/FileManager` —É –≤–∞—à Laravel –ø—Ä–æ–µ–∫—Ç (—É —Ç–æ–π —Å–∞–º–∏–π —à–ª—è—Ö `app/Modules/FileManager`).

### 2. –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è Service Provider

–í—ñ–¥–∫—Ä–∏–π—Ç–µ —Ñ–∞–π–ª `config/app.php` —Ç–∞ –¥–æ–¥–∞–π—Ç–µ –¥–æ –º–∞—Å–∏–≤—É `providers`:

```php
'providers' => ServiceProvider::defaultProviders()->merge([
    // ... —ñ–Ω—à—ñ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∏
    App\Modules\FileManager\FileManagerServiceProvider::class,
])->toArray(),
```

### 3. –ü—É–±–ª—ñ–∫–∞—Ü—ñ—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó (–æ–ø—Ü—ñ–π–Ω–æ)

–Ø–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–º—ñ–Ω–∏—Ç–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –º–æ–¥—É–ª—è, –æ–ø—É–±–ª—ñ–∫—É–π—Ç–µ —Ñ–∞–π–ª –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó:

```bash
php artisan vendor:publish --tag=file-manager-config
```

–¶–µ —Å—Ç–≤–æ—Ä–∏—Ç—å —Ñ–∞–π–ª `config/file-manager.php`, –¥–µ –º–æ–∂–Ω–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏:
- `root_path` - –∫–æ—Ä–µ–Ω–µ–≤–∏–π —à–ª—è—Ö –¥–ª—è –ø–µ—Ä–µ–≥–ª—è–¥—É —Ñ–∞–π–ª—ñ–≤ (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º `base_path()`)
- `route_prefix` - –ø—Ä–µ—Ñ—ñ–∫—Å –º–∞—Ä—à—Ä—É—Ç—ñ–≤ (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º `admin/file-manager`)
- `middleware` - middleware –¥–ª—è –∑–∞—Ö–∏—Å—Ç—É –º–∞—Ä—à—Ä—É—Ç—ñ–≤ (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º `['web', 'auth.admin']`)
- `hidden_paths` - —à–ª—è—Ö–∏, —è–∫—ñ –ø—Ä–∏—Ö–æ–≤–∞–Ω—ñ –≤—ñ–¥ –ø–µ—Ä–µ–≥–ª—è–¥—É (`.git`, `.env`, `vendor`, —Ç–æ—â–æ)
- `max_preview_size` - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∏–π —Ä–æ–∑–º—ñ—Ä —Ñ–∞–π–ª—É –¥–ª—è –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ–≥–æ –ø–µ—Ä–µ–≥–ª—è–¥—É (1MB)
- `preview_extensions` - –¥–æ–∑–≤–æ–ª–µ–Ω—ñ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è –¥–ª—è –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ–≥–æ –ø–µ—Ä–µ–≥–ª—è–¥—É

### 4. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è middleware

–ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –º–æ–¥—É–ª—å –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î middleware `auth.admin`. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ —É –≤–∞—à–æ–º—É –ø—Ä–æ–µ–∫—Ç—ñ —ñ—Å–Ω—É—î —Ç–∞–∫–∏–π middleware, –∞–±–æ –∑–º—ñ–Ω—ñ—Ç—å –π–æ–≥–æ —É –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó.

–Ø–∫—â–æ —É –≤–∞—à–æ–º—É –ø—Ä–æ–µ–∫—Ç—ñ –Ω–µ–º–∞—î middleware `auth.admin`, –≤–∏ –º–æ–∂–µ—Ç–µ:

**–í–∞—Ä—ñ–∞–Ω—Ç –ê:** –°—Ç–≤–æ—Ä–∏—Ç–∏ middleware `auth.admin`:
```bash
php artisan make:middleware AdminAuthenticate
```

**–í–∞—Ä—ñ–∞–Ω—Ç –ë:** –ó–º—ñ–Ω–∏—Ç–∏ middleware —É `config/file-manager.php`:
```php
'middleware' => ['web', 'auth'], // –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ —Å–≤—ñ–π middleware
```

### 5. –î–æ–¥–∞–≤–∞–Ω–Ω—è –¥–æ –Ω–∞–≤—ñ–≥–∞—Ü—ñ—ó (–æ–ø—Ü—ñ–π–Ω–æ)

–î–æ–¥–∞–π—Ç–µ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ —Ñ–∞–π–ª–æ–≤–∏–π –º–µ–Ω–µ–¥–∂–µ—Ä —É –≤–∞—à—É –∞–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—å –∞–±–æ –º–µ–Ω—é:

```blade
<a href="{{ route('file-manager.index') }}">File Manager</a>
```

### 6. –ü—É–±–ª—ñ–∫–∞—Ü—ñ—è views (–æ–ø—Ü—ñ–π–Ω–æ)

–Ø–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –≤–∏–≥–ª—è–¥ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É:

```bash
php artisan vendor:publish --tag=file-manager-views
```

Views –±—É–¥—É—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ñ —É `resources/views/vendor/file-manager`.

## –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

–ü—ñ—Å–ª—è –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –º–æ–¥—É–ª—å –±—É–¥–µ –¥–æ—Å—Ç—É–ø–Ω–∏–π –∑–∞ –∞–¥—Ä–µ—Å–æ—é:
```
/admin/file-manager
```

### –û—Å–Ω–æ–≤–Ω—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ:

1. **–ü–µ—Ä–µ–≥–ª—è–¥ –ø–∞–ø–æ–∫** - –∫–ª—ñ–∫–Ω—ñ—Ç—å –Ω–∞ –Ω–∞–∑–≤—É –ø–∞–ø–∫–∏ –¥–ª—è –Ω–∞–≤—ñ–≥–∞—Ü—ñ—ó
2. **–ü–µ—Ä–µ–≥–ª—è–¥ —Ñ–∞–π–ª—ñ–≤** - –∫–ª—ñ–∫–Ω—ñ—Ç—å –Ω–∞ –Ω–∞–∑–≤—É —Ñ–∞–π–ª—É –¥–ª—è –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ–≥–æ –ø–µ—Ä–µ–≥–ª—è–¥—É
3. **Breadcrumbs** - –Ω–∞–≤—ñ–≥–∞—Ü—ñ—è –ø–æ —à–ª—è—Ö—É
4. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** - —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ø–∞–ø–æ–∫, —Ñ–∞–π–ª—ñ–≤ —Ç–∞ –∑–∞–≥–∞–ª—å–Ω–∏–π —Ä–æ–∑–º—ñ—Ä

## –ú–∞—Ä—à—Ä—É—Ç–∏

–ú–æ–¥—É–ª—å –Ω–∞–¥–∞—î –Ω–∞—Å—Ç—É–ø–Ω—ñ –º–∞—Ä—à—Ä—É—Ç–∏:

- `GET /admin/file-manager` - –≥–æ–ª–æ–≤–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞ —Ñ–∞–π–ª–æ–≤–æ–≥–æ –º–µ–Ω–µ–¥–∂–µ—Ä–∞
- `GET /admin/file-manager/browse` - –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —Å–ø–∏—Å–∫—É —Ñ–∞–π–ª—ñ–≤ —É JSON —Ñ–æ—Ä–º–∞—Ç—ñ
- `GET /admin/file-manager/file` - –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –≤–º—ñ—Å—Ç—É —Ñ–∞–π–ª—É —É JSON —Ñ–æ—Ä–º–∞—Ç—ñ

## –ë–µ–∑–ø–µ–∫–∞

–ú–æ–¥—É–ª—å –≤–∫–ª—é—á–∞—î –∑–∞—Ö–∏—Å—Ç –≤—ñ–¥:
- Directory traversal –∞—Ç–∞–∫
- –ù–µ—Å–∞–Ω–∫—Ü—ñ–æ–Ω–æ–≤–∞–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø—É (—á–µ—Ä–µ–∑ middleware)
- –ü–µ—Ä–µ–≥–ª—è–¥—É —á—É—Ç–ª–∏–≤–∏—Ö —Ñ–∞–π–ª—ñ–≤ (—á–µ—Ä–µ–∑ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é `hidden_paths`)

–ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –Ω–∞–ª–∞—à—Ç—É–≤–∞–ª–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏–π middleware –¥–ª—è –æ–±–º–µ–∂–µ–Ω–Ω—è –¥–æ—Å—Ç—É–ø—É!

## –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è

### –ü—Ä–∏—Ö–æ–≤—É–≤–∞–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤ —ñ –ø–∞–ø–æ–∫

–ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –ø—Ä–∏—Ö–æ–≤–∞–Ω—ñ –Ω–∞—Å—Ç—É–ø–Ω—ñ —à–ª—è—Ö–∏:
- `.git`
- `.env`
- `.env.example`
- `storage/framework`
- `storage/logs`
- `node_modules`
- `vendor`

–í–∏ –º–æ–∂–µ—Ç–µ –¥–æ–¥–∞—Ç–∏ –∞–±–æ –≤–∏–¥–∞–ª–∏—Ç–∏ —à–ª—è—Ö–∏ —É `config/file-manager.php`:

```php
'hidden_paths' => [
    '.git',
    '.env',
    'custom_hidden_folder',
],
```

### –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ–≥–æ –ø–µ—Ä–µ–≥–ª—è–¥—É

–ó–º—ñ–Ω—ñ—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∏–π —Ä–æ–∑–º—ñ—Ä —Ñ–∞–π–ª—É –¥–ª—è –ø–µ—Ä–µ–≥–ª—è–¥—É:

```php
'max_preview_size' => 2 * 1024 * 1024, // 2MB
```

–î–æ–¥–∞–π—Ç–µ –Ω–æ–≤—ñ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è –¥–ª—è –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ–≥–æ –ø–µ—Ä–µ–≥–ª—è–¥—É:

```php
'preview_extensions' => [
    'txt', 'php', 'js', 'json', 'xml', 'html', 'css', 'md',
    'vue', 'blade.php', 'env', 'gitignore',
],
```

## –ü–µ—Ä–µ–≤–∞–≥–∏ –º–æ–¥—É–ª—å–Ω–æ—ó —Å—Ç—Ä—É–∫—Ç—É—Ä–∏

‚úÖ **–ü–æ—Ä—Ç–∞—Ç–∏–≤–Ω—ñ—Å—Ç—å** - –ª–µ–≥–∫–æ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—å—Å—è –º—ñ–∂ –ø—Ä–æ–µ–∫—Ç–∞–º–∏  
‚úÖ **–Ü–∑–æ–ª—å–æ–≤–∞–Ω—ñ—Å—Ç—å** - –≤—Å—ñ —Ñ–∞–π–ª–∏ –º–æ–¥—É–ª—è —É –æ–¥–Ω—ñ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó  
‚úÖ **–ù–µ–∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å** - –Ω–µ –≤–ø–ª–∏–≤–∞—î –Ω–∞ —ñ–Ω—à–∏–π –∫–æ–¥ –ø—Ä–æ–µ–∫—Ç—É  
‚úÖ **–ö–æ–Ω—Ñ—ñ–≥—É—Ä–æ–≤–∞–Ω—ñ—Å—Ç—å** - –≥–Ω—É—á–∫–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —á–µ—Ä–µ–∑ config —Ñ–∞–π–ª  
‚úÖ **–†–æ–∑—à–∏—Ä—é–≤–∞–Ω—ñ—Å—Ç—å** - –ª–µ–≥–∫–æ –¥–æ–¥–∞–≤–∞—Ç–∏ –Ω–æ–≤—ñ —Ñ—É–Ω–∫—Ü—ñ—ó  

## –í–∏–º–æ–≥–∏

- PHP >= 8.1
- Laravel >= 10.0
- –í—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ –¥–æ–∑–≤–æ–ª–∏ –Ω–∞ —á–∏—Ç–∞–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤

## Troubleshooting

### –ü–æ–º–∏–ª–∫–∞ "Class not found"
–ó–∞–ø—É—Å—Ç—ñ—Ç—å:
```bash
composer dump-autoload
```

### –ü–æ–º–∏–ª–∫–∞ –¥–æ—Å—Ç—É–ø—É
–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è middleware —É `config/file-manager.php`

### –ù–µ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—é—Ç—å—Å—è —Ñ–∞–π–ª–∏
–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø—É –¥–æ —Ñ–∞–π–ª—ñ–≤/–ø–∞–ø–æ–∫ —Ç–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è `hidden_paths`

## –õ—ñ—Ü–µ–Ω–∑—ñ—è

–ú–æ–¥—É–ª—å —Ä–æ–∑–ø–æ–≤—Å—é–¥–∂—É—î—Ç—å—Å—è –ø—ñ–¥ —Ç—ñ—î—é –∂ –ª—ñ—Ü–µ–Ω–∑—ñ—î—é, —â–æ —ñ –æ—Å–Ω–æ–≤–Ω–∏–π –ø—Ä–æ–µ–∫—Ç.
