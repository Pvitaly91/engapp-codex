# Компонент Tag Selector - Документація

## Огляд

Створено багаторазовий компонент `<x-tag-selector>` для вибору тегів з функціями групування та живого пошуку.

## Особливості

### 1. Групування тегів по категоріях
- Теги автоматично групуються за їх категорією
- Категорії відсортовані за алфавітом
- Категорія "Без категорії" завжди в кінці списку
- Показується кількість тегів в кожній категорії

### 2. Живий пошук
- Пошукове поле для фільтрації в реальному часі
- Пошук працює як по назві тегу, так і по назві категорії
- При введенні запиту показуються тільки відповідні теги та категорії
- Автоматично оновлюється кількість знайдених тегів

### 3. Візуальна інформація
- Лічильник обраних тегів
- Кількість тегів в кожній категорії
- Повідомлення "Нічого не знайдено" при відсутності результатів
- Hover ефекти для кращого UX

### 4. Адаптивний дизайн
- 2 колонки на мобільних пристроях
- 3 колонки на десктопах
- Прокручуваний список з максимальною висотою

## Використання

### Базове використання

```blade
<x-tag-selector 
    :allTags="$allTags" 
    :selectedTags="[]"
/>
```

### З усіма параметрами

```blade
<x-tag-selector 
    :allTags="$allTags" 
    :selectedTags="old('tags', $page->tags->pluck('id')->toArray())"
    name="tags"
    helpText="Виберіть теги, які відповідають змісту цієї сторінки."
/>
```

### Параметри

| Параметр | Тип | Обов'язковий | За замовчуванням | Опис |
|----------|-----|--------------|------------------|------|
| `allTags` | Collection | Так | - | Колекція всіх доступних тегів |
| `selectedTags` | Array | Ні | `[]` | Масив ID вибраних тегів |
| `name` | String | Ні | `'tags'` | Ім'я поля форми (буде `name[]`) |
| `helpText` | String | Ні | `'Виберіть теги'` | Текст підказки під компонентом |

## Структура компонента

```
┌─────────────────────────────────────────────────┐
│ Теги                                            │
├─────────────────────────────────────────────────┤
│ [🔍] Пошук тегів або категорій...             │
├─────────────────────────────────────────────────┤
│ ┌─────────────────────────────────────────────┐ │
│ │ Present Tenses                    12 тегів │ │
│ │ ┌─────────────┐ ┌─────────────┐           │ │
│ │ │☑ Present    │ │☐ Present    │           │ │
│ │ │  Simple     │ │  Perfect    │   ...     │ │
│ │ └─────────────┘ └─────────────┘           │ │
│ │                                            │ │
│ │ Past Tenses                       8 тегів │ │
│ │ ┌─────────────┐ ┌─────────────┐           │ │
│ │ │☐ Past       │ │☐ Past       │           │ │
│ │ │  Simple     │ │  Perfect    │   ...     │ │
│ │ └─────────────┘ └─────────────┘           │ │
│ └─────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────┤
│ Виберіть теги...              Обрано: 3        │
└─────────────────────────────────────────────────┘
```

## Приклади використання

### У формі редагування сторінки

```blade
// resources/views/engram/pages/manage/edit.blade.php

<form method="POST" action="{{ route('pages.manage.update', $page) }}">
    @csrf
    @method('PUT')
    
    <!-- Інші поля форми -->
    
    <x-tag-selector 
        :allTags="$allTags" 
        :selectedTags="old('tags', $page->tags->pluck('id')->toArray())"
        helpText="Виберіть теги, які відповідають змісту цієї сторінки."
    />
    
    <button type="submit">Зберегти</button>
</form>
```

### У формі створення категорії

```blade
// resources/views/engram/page-categories/manage/create.blade.php

<form method="POST" action="{{ route('page-categories.manage.store') }}">
    @csrf
    
    <!-- Інші поля форми -->
    
    <x-tag-selector 
        :allTags="$allTags" 
        :selectedTags="old('tags', [])"
        helpText="Виберіть теги, які відповідають темам цієї категорії."
    />
    
    <button type="submit">Створити</button>
</form>
```

## Технічні деталі

### Alpine.js

Компонент використовує Alpine.js для інтерактивності:

- `x-data="tagSelector(@js($selectedTags))"` - ініціалізація стану
- `x-model="searchQuery"` - двостороннє зв'язування пошукового поля
- `x-show` - умовне відображення елементів
- `x-transition` - плавні анімації появи/зникнення

### Функції JavaScript

- `filterTags()` - фільтрує теги при введенні в пошук
- `isTagVisible()` - перевіряє чи тег має бути видимим
- `isCategoryVisible()` - перевіряє чи категорія має бути видимою
- `getVisibleTagsCount()` - підраховує кількість видимих тегів
- `hasVisibleTags()` - перевіряє чи є хоч один видимий тег

### Групування тегів

```php
$groupedTags = $allTags->groupBy(function($tag) {
    return $tag->category ?: 'Без категорії';
})->sortKeys();
```

## Переваги

1. **Немає дублювання коду** - використовується в 4 формах (2 для сторінок, 2 для категорій)
2. **Легке обслуговування** - зміни в одному місці впливають на всі форми
3. **Консистентний UX** - однаковий інтерфейс скрізь
4. **Покращена навігація** - групування та пошук роблять вибір швидшим
5. **Зворотний зв'язок** - користувач бачить кількість обраних тегів

## Вимоги

- Laravel 8+
- Alpine.js (вже включений в layouts/app.blade.php)
- Tailwind CSS (для стилів)

## Розташування файлів

- Компонент: `resources/views/components/tag-selector.blade.php`
- Використовується в:
  - `resources/views/engram/pages/manage/create.blade.php`
  - `resources/views/engram/pages/manage/edit.blade.php`
  - `resources/views/engram/page-categories/manage/create.blade.php`
  - `resources/views/engram/page-categories/manage/edit.blade.php`
